define(["jquery","model","view"],function(t,i,n){return function(i,n){function e(t){t.preventDefault();var e=r.input.val();""!=e&&(i.addItem(e),n.renderList(i.data),r.input.val(""))}function a(){var e=t(this).parents("li").data("index");i.removeItem(e),n.renderList(i.data)}function o(){var i=t(this).closest(r.listElNode).find(r.listElText);i.is(":focus")?i.blur():i.focus()}function s(){t(this).data("value",t(this).text()),t(this).on("keydown",function(i){(16==i.which&&13==i.which||13==i.which)&&(i.preventDefault(),t(this).blur())})}function l(){var e=t(this).data("value"),a=t(this).text();if(t(this).data("value",a),a!==e){var o=t(this).closest(r.listElNode).data("index");i.editItem(o,a),n.renderList(i.data)}}var r=n.controls;r.form.on("submit",e),r.listContainer.on("click",r.removeBtn,a),r.listContainer.on("click",r.editBtn,o),r.listContainer.on("focusin",r.listElText,s),r.listContainer.on("focusout",r.listElText,l)}});