define("model",[],function(){function t(t,e){function i(){localStorage.setItem(e,JSON.stringify(n.data))}var n=this;n.data=t,n.addItem=function(t){return n.data.push(t),i(),n.data},n.removeItem=function(t){return n.data.splice(t,1),i(),n.data},n.editItem=function(t,e){return n.data.splice(t,1,e),i(),n.data}}return t}),define("view",["jquery","lodash","model"],function(t,e,i){return function(i){var n=this;n.init=function(){var a=e.template(t("#wrapper-template").html());t("body").append(a),n.controls={listContainer:t(".list"),form:t(".controls"),input:t(".controls__input"),listElNode:"li",listElText:".list__el_text",editBtn:".list__el_edit",removeBtn:".list__el_remove"},n.renderList(i.data)},n.renderList=function(i){var a=e.template(t("#list-template").html()),o=a({data:i});n.controls.listContainer.html(o)},n.init()}}),define("controller",["jquery","model","view"],function(t,e,i){return function(e,i){function n(t){t.preventDefault();var n=s.input.val();""!=n&&(e.addItem(n),i.renderList(e.data),s.input.val(""))}function a(){var n=t(this).parents("li").data("index");e.removeItem(n),i.renderList(e.data)}function o(){var e=t(this).closest(s.listElNode).find(s.listElText);e.is(":focus")?e.blur():e.focus()}function r(){t(this).data("value",t(this).text()),t(this).on("keydown",function(e){(16==e.which&&13==e.which||13==e.which)&&(e.preventDefault(),t(this).blur())})}function l(){var n=t(this).data("value"),a=t(this).text();if(t(this).data("value",a),a!==n){var o=t(this).closest(s.listElNode).data("index");e.editItem(o,a),i.renderList(e.data)}}var s=i.controls;s.form.on("submit",n),s.listContainer.on("click",s.removeBtn,a),s.listContainer.on("click",s.editBtn,o),s.listContainer.on("focusin",s.listElText,r),s.listContainer.on("focusout",s.listElText,l)}}),define("main",["jquery","model","view","controller"],function(t,e,i,n){t(function(){var t=["покрасить пол","застелить постель","вызвать экзорциста","посушить волосы"];if(localStorage.getItem("tasks"))var a=JSON.parse(localStorage.getItem("tasks"));else{var a=t;localStorage.setItem("tasks",JSON.stringify(t))}var o=new e(a,"tasks"),r=new i(o);new n(o,r)})}),requirejs.config({paths:{jquery:"http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min",lodash:"https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min"}}),requirejs(["main"]),define("../app",function(){});